# LangSmith è¿½è¸ªé…ç½®æŒ‡å—

## ä»€ä¹ˆæ˜¯ LangSmithï¼Ÿ

LangSmith æ˜¯ LangChain çš„å¯è§‚æµ‹æ€§å¹³å°ï¼Œå¯ä»¥å¸®åŠ©ä½ ï¼š

- ğŸ“Š **è¿½è¸ªæ¯æ¬¡ LLM è°ƒç”¨**ï¼šæŸ¥çœ‹è¾“å…¥ã€è¾“å‡ºã€å»¶è¿Ÿ
- ğŸ” **è°ƒè¯• RAG æµç¨‹**ï¼šæŸ¥çœ‹æ£€ç´¢åˆ°çš„æ–‡æ¡£å†…å®¹
- âš¡ **æ€§èƒ½åˆ†æ**ï¼šè¯†åˆ«ç“¶é¢ˆå’Œä¼˜åŒ–æœºä¼š
- ğŸ› **é”™è¯¯ç›‘æ§**ï¼šå¿«é€Ÿå®šä½é—®é¢˜
- ğŸ“ˆ **æ•°æ®åˆ†æ**ï¼šç»Ÿè®¡ä½¿ç”¨æƒ…å†µå’Œæˆæœ¬

## é…ç½®æ­¥éª¤

### 1. æ³¨å†Œ LangSmith è´¦å·

è®¿é—® [https://smith.langchain.com/](https://smith.langchain.com/) å¹¶æ³¨å†Œè´¦å·ï¼ˆå…è´¹ï¼‰ã€‚

### 2. è·å– API Key

1. ç™»å½•åï¼Œç‚¹å‡»å³ä¸Šè§’çš„ç”¨æˆ·å¤´åƒ
2. é€‰æ‹© **Settings** â†’ **API Keys**
3. ç‚¹å‡» **Create API Key**
4. å¤åˆ¶ç”Ÿæˆçš„ API Key

### 3. é…ç½®ç¯å¢ƒå˜é‡

ç¼–è¾‘é¡¹ç›®æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶ï¼š

```env
# å¯ç”¨ LangSmith è¿½è¸ª
LANGCHAIN_TRACING_V2=true

# å¡«å…¥ä½ çš„ API Key
LANGCHAIN_API_KEY=ls_xxx_your_api_key_here

# é¡¹ç›®åç§°ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
LANGCHAIN_PROJECT=rag-system
```

### 4. é‡å¯æœåŠ¡

```bash
npm start
```

## ä½¿ç”¨æ–¹æ³•

### æŸ¥çœ‹è¿½è¸ªè®°å½•

1. å¯åŠ¨æœåŠ¡åï¼Œå‘é€ä¸€ä¸ªæŸ¥è¯¢è¯·æ±‚ï¼š

```bash
curl -X POST http://localhost:3000/query \
  -H "Content-Type: application/json" \
  -d '{"query": "ä»€ä¹ˆæ˜¯ Nginxï¼Ÿ"}'
```

2. è®¿é—® [https://smith.langchain.com/](https://smith.langchain.com/)

3. åœ¨å·¦ä¾§èœå•é€‰æ‹© **Projects** â†’ **rag-system**

4. ä½ ä¼šçœ‹åˆ°æ‰€æœ‰çš„è¿½è¸ªè®°å½•ï¼Œç‚¹å‡»ä»»æ„ä¸€æ¡æŸ¥çœ‹è¯¦æƒ…

### è¿½è¸ªè®°å½•åŒ…å«çš„ä¿¡æ¯

æ¯æ¡è¿½è¸ªè®°å½•ä¼šæ˜¾ç¤ºï¼š

- **è¾“å…¥**ï¼šç”¨æˆ·çš„æŸ¥è¯¢é—®é¢˜
- **æ£€ç´¢æ­¥éª¤**ï¼š
  - æ£€ç´¢åˆ°çš„æ–‡æ¡£æ•°é‡
  - æ¯ä¸ªæ–‡æ¡£çš„å†…å®¹å’Œæ¥æº
  - ç›¸ä¼¼åº¦åˆ†æ•°
- **LLM è°ƒç”¨**ï¼š
  - å®Œæ•´çš„ Promptï¼ˆåŒ…å«ä¸Šä¸‹æ–‡ï¼‰
  - æ¨¡å‹å“åº”
  - Token ä½¿ç”¨é‡
  - å“åº”æ—¶é—´
- **è¾“å‡º**ï¼šæœ€ç»ˆè¿”å›ç»™ç”¨æˆ·çš„ç­”æ¡ˆ

### ç¤ºä¾‹è¿½è¸ªè§†å›¾

```
ğŸ“Š Trace: RAG Query
â”œâ”€ ğŸ” Vector Search (120ms)
â”‚  â”œâ”€ Query: "ä»€ä¹ˆæ˜¯ Nginxï¼Ÿ"
â”‚  â””â”€ Retrieved 3 documents
â”‚     â”œâ”€ Doc 1: nginx_v2.pdf (similarity: 0.89)
â”‚     â”œâ”€ Doc 2: nginx_v2.pdf (similarity: 0.85)
â”‚     â””â”€ Doc 3: nginx_v2.pdf (similarity: 0.82)
â”‚
â””â”€ ğŸ¤– LLM Call (1.2s)
   â”œâ”€ Model: glm-4-flash
   â”œâ”€ Tokens: 1,234 input / 456 output
   â””â”€ Response: "Nginx æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„..."
```

## é«˜çº§åŠŸèƒ½

### 1. è‡ªå®šä¹‰é¡¹ç›®åç§°

åœ¨ä»£ç ä¸­åŠ¨æ€è®¾ç½®é¡¹ç›®åç§°ï¼š

```typescript
process.env.LANGCHAIN_PROJECT = 'my-custom-project';
```

### 2. æ·»åŠ è‡ªå®šä¹‰æ ‡ç­¾

```typescript
import { traceable } from 'langsmith/traceable';

const processQuery = traceable(
  async (query: string) => {
    // ä½ çš„ä»£ç 
  },
  {
    name: 'custom_query',
    tags: ['production', 'v1.0'],
    metadata: { user_id: '123' }
  }
);
```

### 3. ç¦ç”¨è¿½è¸ªï¼ˆä¸´æ—¶ï¼‰

```bash
# åœ¨ .env ä¸­è®¾ç½®
LANGCHAIN_TRACING_V2=false
```

æˆ–åœ¨ä»£ç ä¸­ï¼š

```typescript
process.env.LANGCHAIN_TRACING_V2 = 'false';
```

## æ€§èƒ½å½±å“

- LangSmith è¿½è¸ªå¯¹æ€§èƒ½å½±å“å¾ˆå°ï¼ˆé€šå¸¸ < 50msï¼‰
- æ•°æ®å¼‚æ­¥å‘é€ï¼Œä¸ä¼šé˜»å¡ä¸»æµç¨‹
- å¯ä»¥éšæ—¶å¼€å¯/å…³é—­

## éšç§å’Œå®‰å…¨

- æ‰€æœ‰æ•°æ®é€šè¿‡ HTTPS åŠ å¯†ä¼ è¾“
- å¯ä»¥è®¾ç½®æ•°æ®ä¿ç•™æœŸé™
- æ”¯æŒæœ¬åœ°éƒ¨ç½²ï¼ˆä¼ä¸šç‰ˆï¼‰
- æ•æ„Ÿä¿¡æ¯å¯ä»¥é€šè¿‡é…ç½®è¿‡æ»¤

## æ•…éšœæ’é™¤

### è¿½è¸ªæœªæ˜¾ç¤º

1. æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤ `LANGCHAIN_TRACING_V2=true`
3. æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
4. æ£€æŸ¥ç½‘ç»œè¿æ¥

### API Key æ— æ•ˆ

```
Error: Invalid API key
```

è§£å†³ï¼šé‡æ–°ç”Ÿæˆ API Key å¹¶æ›´æ–° `.env` æ–‡ä»¶

### é¡¹ç›®æœªåˆ›å»º

é¦–æ¬¡ä½¿ç”¨æ—¶ï¼ŒLangSmith ä¼šè‡ªåŠ¨åˆ›å»ºé¡¹ç›®ã€‚å¦‚æœæœªæ˜¾ç¤ºï¼Œæ‰‹åŠ¨åˆ·æ–°é¡µé¢ã€‚

## æˆæœ¬

- **å…è´¹ç‰ˆ**ï¼šæ¯æœˆ 5,000 æ¬¡è¿½è¸ª
- **ä»˜è´¹ç‰ˆ**ï¼š$39/æœˆèµ·ï¼Œæ— é™è¿½è¸ª

å¯¹äºå¼€å‘å’Œæµ‹è¯•ï¼Œå…è´¹ç‰ˆå®Œå…¨å¤Ÿç”¨ï¼

## ç›¸å…³é“¾æ¥

- [LangSmith å®˜æ–¹æ–‡æ¡£](https://docs.smith.langchain.com/)
- [LangSmith Python SDK](https://github.com/langchain-ai/langsmith-sdk)
- [LangSmith JavaScript SDK](https://github.com/langchain-ai/langsmith-sdk/tree/main/js)

## æ€»ç»“

LangSmith æ˜¯è°ƒè¯•å’Œä¼˜åŒ– RAG ç³»ç»Ÿçš„å¼ºå¤§å·¥å…·ã€‚é€šè¿‡å¯è§†åŒ–è¿½è¸ªï¼Œä½ å¯ä»¥ï¼š

âœ… å¿«é€Ÿå‘ç°æ£€ç´¢è´¨é‡é—®é¢˜  
âœ… ä¼˜åŒ– Prompt è®¾è®¡  
âœ… ç›‘æ§ç³»ç»Ÿæ€§èƒ½  
âœ… åˆ†æç”¨æˆ·æŸ¥è¯¢æ¨¡å¼  

å¼ºçƒˆå»ºè®®åœ¨å¼€å‘é˜¶æ®µå¯ç”¨ï¼
